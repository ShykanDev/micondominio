import{d as p,m as d,o as w,e as v,a as o,q as m,v as c,t as b,g as y,h as t}from"./index-D67faS8Z.js";import{g as x,c as C,b as k,T as h,u as I,d as j,e as D}from"./index.esm2017-CZwVnIW6.js";import{o as u}from"./ownerVals-Cgb70Twk.js";import{N}from"./notyf.min-ll9y_k96.js";const E={class:"flex w-full p-4 bg-white shadow-lg ]"},V={class:"w-full p-6 mt-10 rounded-lg shadow-md bg-slate-50"},O={class:"space-y-4 font-poppins"},S={class:"relative mt-1 rounded-md shadow-sm"},L={class:"relative mt-1 rounded-md shadow-sm"},R=p({__name:"CreateCommentComponent",setup(T){const i=new N({duration:6e3,dismissible:!0,position:{x:"left",y:"top"},ripple:!0}),l=x(),a=d(""),n=d(""),f=async()=>{const r=j(l,"condominios",t().getAdminDocId,"usuarios",u().getUserDataId),e=await D(r);if(e.exists()){if(!e.data().allowComments)return i.error("Error al agregar el comentario, no tienes permiso para comentar en este dominio"),!1}else return console.log("No such document!"),!1;return!0},g=async()=>{const r=C(l,`condominios/${t().getAdminDocId}/comments`);t().setIsLoadingOwner(!0);try{if(!await f()){t().setIsLoadingOwner(!1);return}const s=await k(r,{announcement:n.value,author:u().getOwnerName,category:a.value,date:h.now(),documentId:""});await I(s,{documentId:s.id}),t().setIsLoadingOwner(!1),i.success("Se ha agregado el comentario"),a.value="",n.value=""}catch(e){t().setIsLoadingOwner(!1),console.log(e)}};return(r,e)=>(w(),v("div",E,[o("section",V,[e[7]||(e[7]=o("h2",{class:"mb-4 text-2xl font-bold font-signika text-sky-800"},"Crear Nuevo Comentario",-1)),o("form",O,[o("div",null,[e[3]||(e[3]=o("label",{for:"categoria",class:"block text-sm font-medium text-gray-700"},"Categoría",-1)),o("div",S,[m(o("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),type:"text",id:"categoria",name:"categoria",class:"block w-full p-3 pr-10 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm outline-sky-900",placeholder:"Escribe la categoría. Ejemplo: Servicios, Sugerencias, General, Información"},null,512),[[c,a.value]]),e[2]||(e[2]=o("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[o("i",{class:"text-gray-400 fas fa-tags"})],-1))])]),o("div",null,[e[5]||(e[5]=o("label",{for:"mensaje",class:"block text-sm font-medium text-gray-700"},"Mensaje",-1)),o("div",L,[m(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),id:"mensaje",name:"mensaje",rows:"4",class:"block w-full pr-10 border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Escriba su mensaje, este mensaje será visible para todos los propietarios de su edificio/condominio"},null,512),[[c,n.value]]),e[4]||(e[4]=o("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},[o("i",{class:"text-gray-400 fas fa-comment"})],-1))])]),o("div",null,[o("button",{onClick:b(g,["prevent"]),type:"submit",class:"inline-flex justify-center w-full px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md shadow-sm bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500"},e[6]||(e[6]=[o("i",{class:"mr-2 fas fa-paper-plane"},null,-1),y(" Enviar ")]))])])])]))}});export{R as default};
