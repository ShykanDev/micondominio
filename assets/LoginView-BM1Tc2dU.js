import{d as A,m,p as L,o as c,e as x,a as s,j as U,q as b,v as w,t as N,F as V,h as t,c as _,w as j,_ as B,i as M}from"./index-TFeQVYrp.js";import{o as v}from"./ownerVals-Brrn9QFR.js";import{g as q,s as G}from"./index-2cab5241-DCtVy1C3.js";import{g as H,c as y,q as I,w as h,a as C}from"./index.esm2017-DkIOf4jH.js";const R={class:"flex items-center justify-center min-h-screen p-4"},$={key:0,class:"fixed inset-0 top-0 bottom-0 left-0 right-0 z-50 flex items-center justify-center w-full bg-black bg-opacity-50"},E={class:"relative w-full max-w-md p-6 bg-white rounded-lg shadow-lg font-poppins"},z={class:"absolute text-gray-400 top-4 right-4 hover:text-gray-600 focus:outline-none"},F={class:"mb-4"},O={class:"relative mt-1 rounded-md shadow-sm"},W={class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},P={class:"flex flex-col w-full max-w-5xl p-8 space-y-4 bg-white rounded-lg shadow-lg md:flex-row md:space-y-0 md:space-x-8"},T={class:"w-full md:w-1/2"},Y={class:"space-y-4"},J={class:"flex items-center justify-between mt-2"},K=A({__name:"LoginCard",setup(D){const i=m(!1),f=q(),p=H(),a=m(""),l=m(""),g=L(),k=async()=>{var r;t().setIsLoadingLogin(!0);try{const e=await G(f,a.value,l.value),o=e.user;if(o&&((r=o.displayName)!=null&&r.includes("administrador"))){t().setIsAdmin(!0),t().setIsUserAuth(!0),t().setUserUid(e.user.uid);const d=y(p,"condominios"),u=I(d,h("createdBy","==",o.uid)),n=await C(u);n.empty||(console.log(n.docs[0].data()),t().setAdimnDocId(n.docs[0].id),t().setCondominiumId(n.docs[0].data().condominiumId),t().setInvitationCode(n.docs[0].data().invitationId),g.push({name:"dashboard"})),t().setIsLoadingLogin(!1)}else if(o&&o.displayName&&o.displayName.includes("propietario")){t().setIsAdmin(!1),t().setIsUserAuth(!0),t().setUserUid(e.user.uid),v().setOwnerName(o.displayName);const d=y(p,"usersGeneral"),u=I(d,h("userUid","==",o.uid)),n=await C(u);n.empty?(console.log("No existe ese usuario"),t().setIsLoadingLogin(!1)):(t().setOwnerInvitationCode(n.docs[0].data().invitationCode),t().setAdimnDocId(n.docs[0].data().asociatedToCondominiumId),v().setUserDataId(n.docs[0].data().userDataId),t().setIsLoadingLogin(!1),g.push({name:"about"}))}}catch(e){t().setIsLoadingLogin(!1),console.log("Error al iniciar sesión",e)}};return(r,e)=>(c(),x(V,null,[e[15]||(e[15]=s("img",{src:"https://images.unsplash.com/photo-1523789265170-a9376a327aed?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",class:"fixed top-0 bottom-0 left-0 right-0 object-cover w-full h-full animate-fade -z-10",alt:""},null,-1)),s("section",R,[i.value?(c(),x("div",$,[s("div",E,[s("button",z,[s("i",{onClick:e[0]||(e[0]=o=>i.value=!1),class:"fas fa-times"})]),e[7]||(e[7]=s("h2",{class:"mb-4 text-2xl font-bold"},"Recuperación de Contraseña",-1)),e[8]||(e[8]=s("p",{class:"mb-4"},"Introduzca su correo electrónico para restablecer la contraseña.",-1)),s("div",F,[e[6]||(e[6]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Correo Electrónico",-1)),s("div",O,[s("div",W,[s("i",{onClick:e[1]||(e[1]=o=>i.value=!1),class:"text-gray-400 fas fa-envelope"})]),e[5]||(e[5]=s("input",{type:"email",id:"email",class:"block w-full py-2 pl-10 pr-3 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"correo@ejemplo.com"},null,-1))])]),e[9]||(e[9]=s("button",{class:"w-full py-2 text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Restablecer Contraseña ",-1))])])):U("",!0),s("div",P,[s("div",T,[e[12]||(e[12]=s("h2",{class:"mb-4 text-2xl text-blue-600 font-poppins"},"Iniciar sesión",-1)),s("form",Y,[s("div",null,[e[10]||(e[10]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Correo electrónico",-1)),b(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>a.value=o),type:"email",id:"email",placeholder:"correo@ejemplo.com",class:"w-full px-4 py-2 mt-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,a.value]])]),s("div",null,[e[11]||(e[11]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Contraseña",-1)),b(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.value=o),type:"password",id:"password",placeholder:"********",class:"w-full px-4 py-2 mt-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,l.value]])]),s("div",J,[s("a",{onClick:e[4]||(e[4]=o=>i.value=!i.value),class:"text-sm text-blue-500 cursor-pointer"},"¿Olvidó su contraseña?")]),s("button",{type:"submit",onClick:N(k,["prevent"]),class:"w-full py-2 mt-4 font-semibold text-white transition-all bg-blue-600 rounded-md hover:bg-blue-700"},"Iniciar sesión")]),e[13]||(e[13]=s("div",{class:"mt-4 text-center"},[s("p",{class:"text-sm text-gray-600"},"¿No tienes una cuenta?"),s("a",{href:"#",class:"font-semibold text-blue-600"},"Crear cuenta")],-1))]),e[14]||(e[14]=s("div",{class:"w-full text-center md:w-1/2 md:text-left"},[s("h3",{class:"mb-4 text-xl text-center text-gray-800 font-poppins"},"Inicie sesión para interactuar con su condominio/edificio"),s("img",{src:"https://images.unsplash.com/photo-1517048676732-d65bc937f952?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Imagen",class:"mx-auto rounded-md w-4/4 md:mx-0"})],-1))])])],64))}}),ee=A({__name:"LoginView",setup(D){return(i,f)=>(c(),_(B,null,{main:j(()=>[M(K)]),_:1}))}});export{ee as default};
