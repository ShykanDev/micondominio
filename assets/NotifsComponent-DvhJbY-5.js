import{d as h,m as d,h as u,o as f,e as v,a as e,q as p,a8 as D,i as I,g as l,t as c,v as m,F as x,a3 as E,a0 as T,a9 as V}from"./index-D67faS8Z.js";import{N}from"./notyf.min-ll9y_k96.js";import{_ as O}from"./SurveyVotation.vue_vue_type_script_setup_true_lang-KY8ThD3p.js";import{g as U,c as B,b as F,T as L,u as S}from"./index.esm2017-CZwVnIW6.js";const K={class:"max-w-4xl p-6 mx-auto mt-10 bg-white rounded-lg shadow-md font-poppins"},$={class:"mb-4"},M={class:"mb-4 text-sky-800"},j={class:"flex flex-wrap my-3 space-x-2 font-poppins"},q=["onClick"],A={class:"mb-4 font-poppins"},R={id:"opciones-container"},z={class:"flex items-center mb-2"},G=["onKeypress"],H={class:"flex justify-end"},Z=h({__name:"NotifsComponent",setup(J){const y=new N({duration:4e3,position:{x:"left",y:"top"},dismissible:!0}),o=d(""),i=d(""),r=d(""),a=d({title:o.value,description:i.value,options:[],surveyDocId:""}),b=()=>{a.value.options.push(r.value),r.value=""},k=t=>{a.value.options.splice(t,1)},w=U(),C=B(w,`condominios/${u().getCondominiumId}/surveys`),_=async()=>{u().setIsLoadingComponent(!0);try{const t=await F(C,{title:o.value,description:i.value,options:a.value.options,createdBy:u().getUserUid,creationDate:L.now()});await S(t,{surveyDocId:t.id}),o.value="",i.value="",r.value="",a.value.options=[],y.success("Encuesta enviada exitosamente"),u().setIsLoadingComponent(!1)}catch(t){console.log("Error enviando la survey a firebase:",t),y.error("Error enviando la survey intentelo mas tarde"),u().setIsLoadingComponent(!1)}};return(t,s)=>(f(),v(x,null,[e("section",null,[p(I(O,{class:"fixed bottom-3 left-2","survey-description":i.value,"survey-title":o.value,"survey-options":a.value.options},null,8,["survey-description","survey-title","survey-options"]),[[D,o.value]])]),e("section",K,[s[9]||(s[9]=e("h2",{class:"mb-4 text-2xl font-bold text-sky-800"},[e("i",{class:"fas fa-poll text-sky-900"}),l(" Crear Encuesta")],-1)),e("form",{onSubmit:s[3]||(s[3]=c(()=>{},["prevent"]))},[e("div",$,[s[4]||(s[4]=e("label",{for:"titulo",class:"block mb-2 font-bold text-sky-700"},[e("i",{class:"fas fa-heading"}),l(" Título de la Encuesta")],-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>o.value=n),type:"text",id:"titulo",name:"titulo",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese el título de la encuesta"},null,512),[[m,o.value]])]),e("div",M,[s[5]||(s[5]=e("label",{for:"descripcion",class:"block mb-2 font-bold text-sky-700"},[e("i",{class:"fas fa-align-left"}),l(" Descripción")],-1)),p(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=n=>i.value=n),id:"descripcion",name:"descripcion",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese la descripción de la encuesta"},null,512),[[m,i.value]])]),e("div",j,[(f(!0),v(x,null,E(a.value.options,(n,g)=>(f(),v("article",{key:g,class:"bg-sky-900 px-2 my-1 rounded-md text-white border-[1px] border-sky-600"},[l(T(n)+" ",1),e("i",{onClick:P=>k(g),class:"text-red-400 cursor-pointer fas fa-times"},null,8,q)]))),128))]),e("div",A,[s[7]||(s[7]=e("label",{for:"opciones",class:"block mb-2 font-bold text-sky-700"},[e("i",{class:"fas fa-list"}),l(" Opciones")],-1)),e("div",R,[e("div",z,[p(e("input",{onKeypress:V(c(b,["prevent"]),["enter"]),"onUpdate:modelValue":s[2]||(s[2]=n=>r.value=n),type:"text",name:"opciones[]",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese una opción"},null,40,G),[[m,r.value]])])]),e("button",{onClick:c(b,["prevent"]),type:"button",id:"agregar-opcion",class:"px-4 py-2 mt-2 text-white bg-green-500 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"},s[6]||(s[6]=[e("i",{class:"fas fa-plus"},null,-1),l(" Agregar Opción")]))]),e("div",H,[e("button",{onClick:c(_,["prevent"]),type:"submit",class:"px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},s[8]||(s[8]=[e("i",{class:"fas fa-paper-plane"},null,-1),l(" Enviar Encuesta")]))])],32)])],64))}});export{Z as default};
