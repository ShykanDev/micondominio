import{d as p,a6 as w,o as a,f as l,a as e,t as c,Z as b,s as f,n as x,g as y,r as g,a7 as C,k,F as S,h as q,c as D}from"./index-CvqitIG0.js";import{g as h,d as I,e as N,c as $,q as B,w as L,a as V}from"./index.esm2017-pqe3CByq.js";import{L as E}from"./LoadingBar-ByCMWFyU.js";const F={class:"w-full max-w-md p-6 rounded-lg shadow-lg hover:border-[1px] hover:border-sky-700 bg-slate-50"},j={class:"flex items-center mb-4"},T={class:"text-lg font-semibold"},A={class:"text-sm text-gray-500"},R={class:"mb-4 text-gray-700"},M={class:"flex items-center justify-between min-w-60"},U={class:"flex items-center w-full text-gray-500"},Z={class:"text-xs"},z={key:0,class:"flex justify-end w-full"},G=p({__name:"CommentCard",props:{userName:{type:String,required:!0},userType:{type:String,required:!0},comment:{type:String,required:!0},userImage:{type:String,required:!1},date:{type:String,default:()=>new Date().toLocaleDateString()},commentId:{type:String,required:!0}},setup(n){const s=n,m=w(()=>s.userName.replace(/administrador/gi,"").trim()),d=async()=>{try{const o=h(),t=I(o,`condominios/${f().getCondominiumId}/comments/${s.commentId}`);console.log("Comentario a eliminar:",t),await N(t),console.log("Comentario eliminado con éxito")}catch(o){console.error("Error al eliminar el comentario:",o)}};return(o,t)=>(a(),l("div",F,[e("div",j,[t[0]||(t[0]=e("i",{class:"mr-3 text-3xl text-gray-500 fas fa-user-circle"},null,-1)),e("div",null,[e("h2",T,c(m.value),1),e("p",A,[e("small",null,"Categoría: "+c(n.userType),1)])])]),e("p",R,c(n.comment),1),e("div",M,[e("div",U,[t[1]||(t[1]=e("i",{class:"mr-1 fas fa-calendar-alt"},null,-1)),e("span",Z,c(n.date),1)]),b(f)().getIsAdmin?(a(),l("div",z,[e("button",{onClick:d,class:"flex items-center text-red-500 hover:text-red-700"},t[2]||(t[2]=[e("i",{class:"mr-1 fas fa-trash"},null,-1),x(" Eliminar ")]))])):y("",!0)])]))}}),H={class:"w-full p-6 mx-auto mt-10 overflow-auto bg-white rounded-lg shadow-md min-h-dvh font-poppins"},J={key:0,class:"fixed top-0 bottom-0 left-0 right-0 flex items-center justify-center bg-white bg-opacity-0"},Q=p({__name:"CommentsComponent",setup(n){const s=g(!1),m=h(),d=$(m,`condominios/${f().getAdminDocId}/comments`),o=B(d,L("announcement","!=","")),t=g([]),_=async()=>{s.value=!0;try{(await V(o)).forEach(i=>{t.value.push(i.data())}),s.value=!1}catch(u){s.value=!1,console.log(u)}};return C(()=>{_()}),(u,i)=>(a(),l("section",H,[s.value?(a(),l("section",J,[k(E)])):y("",!0),i[0]||(i[0]=e("h2",{class:"text-2xl font-bold text-center text-sky-800"},[x("Comentarios de sus propietarios"),e("i",{class:"ml-2 fas fa-comment"}),e("i",{class:"ml-2 fas fa-users"})],-1)),e("article",null,[(a(!0),l(S,null,q(t.value,(r,v)=>(a(),D(G,{key:v,comment:r.announcement,"user-name":r.author,"user-type":r.category,date:new Date().toDateString(r.date),"comment-id":r.documentId},null,8,["comment","user-name","user-type","date","comment-id"]))),128))])]))}});export{Q as default};
