import{d as x,a1 as C,o as c,e as g,a as t,g as u,a0 as a,n as m,j as y,h as r,b as h,m as v,a2 as B,F as D,a3 as I,c as U}from"./index-TFeQVYrp.js";import{N}from"./notyf.min-ll9y_k96.js";import{g as k,d as S,u as b,c as L,a as q}from"./index.esm2017-DkIOf4jH.js";const E={class:"w-full max-w-xs p-6 bg-white rounded-lg shadow-md font-poppins"},F={class:"flex items-center mb-4"},$={class:"ml-4"},j={class:"font-medium text-gray-600 text-md"},z={class:"text-sky-700"},T={class:"text-gray-800"},V={class:"text-sky-700"},_={class:"text-gray-800"},O={class:"text-sky-700"},R={class:"flex flex-col items-start justify-between"},H={class:"flex space-x-2"},M={class:"flex items-center mt-2 space-x-2"},A={class:"flex my-3 space-x-2"},G={key:0,class:"flex items-center mt-2 space-x-2"},J={class:"text-xs"},K=x({__name:"UserCard",props:{name:{type:String,default:"Daniel Martinez"},deptNumber:{type:String,default:"22a"},creationDate:{type:Object},allowComments:{type:Boolean,default:!0},associatedTo:{type:String,default:""},blockedReason:{type:String,default:""},isBlocked:{type:Boolean,default:!1},userUid:{type:String,required:!0},docId:{type:String,required:!0}},setup(o){const n=new N({duration:4e3,dismissible:!0,position:{x:"left",y:"top"},ripple:!0}),i=o,p=C(()=>{if(i.creationDate){const s=i.creationDate.toDate();return s.toLocaleDateString()+" "+s.toLocaleTimeString()}return i.creationDate}),f=k(),l=async s=>{r().setIsLoadingComponent(!0);const e=r().getCondominiumId;if(!e){n.error("ID del condominio no encontrado"),r().setIsLoadingComponent(!1);return}const d=S(f,"condominios",e,"usuarios",i.docId);try{switch(s){case"blockUnblock":await b(d,{isBlocked:!i.isBlocked}),n.success("Operación realizada"),r().setIsLoadingComponent(!1);break;case"commentUncomment":await b(d,{allowComments:!i.allowComments}),r().setIsLoadingComponent(!1),n.success("Operación realizada");break;default:r().setIsLoadingComponent(!1);break}}catch(w){console.log(w),r().setIsLoadingComponent(!1),n.error("Error en la operacion, intentelo de nuevo")}};return(s,e)=>(c(),g("div",E,[t("div",F,[e[5]||(e[5]=t("i",{class:"text-4xl text-gray-500 fas fa-user-circle"},null,-1)),t("div",$,[t("h2",j,[e[2]||(e[2]=u(" Nombre del Usuario: ")),t("span",z,a(o.name),1)]),t("p",T,[e[3]||(e[3]=u(" Departamento: ")),t("span",V,a(o.deptNumber),1)]),t("p",_,[e[4]||(e[4]=u(" Fecha de Creación: ")),t("span",O,a(p.value),1)])])]),t("div",R,[t("div",H,[e[6]||(e[6]=t("p",null,"Comentarios:",-1)),t("p",{class:m(["px-1 text-white rounded",o.allowComments?"bg-green-600":"bg-red-600"])},a(o.allowComments?"Habilitados":"Deshabilitados"),3)]),t("div",M,[e[7]||(e[7]=t("i",{class:"text-lg text-gray-500 fas fa-info-circle"},null,-1)),t("p",null,a(o.allowComments?"Este usuario puede comentar libremente":"Este usuario no puede comentar."),1)]),t("div",A,[e[8]||(e[8]=t("p",null,"Estado: ",-1)),t("p",{class:m(["px-1 text-white rounded animate-pulse animate-duration-[5s]",o.isBlocked?"bg-red-600":"bg-green-600"])},a(o.isBlocked?"Bloqueado":"Desbloaueado"),3)])]),t("button",{onClick:e[0]||(e[0]=d=>l("blockUnblock")),class:m(["px-4 py-2 mt-2 text-white rounded-lg focus:outline-none focus:ring-2",o.isBlocked?"bg-green-500 hover:bg-green-700 focus:ring-green-500":"bg-red-500 hover:bg-red-700 focus:ring-red-500"])},a(o.isBlocked?"Desbloquear":"Bloquear"),3),t("button",{onClick:e[1]||(e[1]=d=>l("commentUncomment")),class:m(["px-4 py-2 mt-2 text-sm text-white rounded-lg focus:outline-none focus:ring-2",o.allowComments?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500":"bg-yellow-600 hover:bg-red-700 focus:ring-red-500"])},a(o.allowComments?"Deshabilitar Comentarios":"Habilitar Comentarios"),3),o.isBlocked?(c(),g("div",G,[t("p",J,[e[9]||(e[9]=t("i",{class:"text-lg text-gray-500 fas fa-info-circle"},null,-1)),u(" "+a(o.isBlocked?"Este usuario está bloqueado y no puede participar, su cuenta ha sido bloqueada en el sistema para su condominio, el usuario aún puede comentar en la pagina administracioncondominio.com, pero no podrá hacerlo en su condominio.":""),1)])])):y("",!0)]))}}),P=h(K,[["__scopeId","data-v-51d77694"]]),Q={key:0,class:"flex flex-wrap items-center space-y-3 bg-white rounded-lg shadow-md justify-evenly"},Z=x({__name:"UsersComponent",setup(o){const n=v([]),i=k(),p=L(i,`condominios/${r().getCondominiumId}/usuarios`),f=async()=>{try{const l=await q(p);if(l.empty){console.log("No se encontraron usuarios");return}else l.forEach(s=>{console.log(s.data()),n.value.push(s.data())})}catch(l){console.log(l)}};return B(()=>{f()}),(l,s)=>n.value?(c(),g("div",Q,[(c(!0),g(D,null,I(n.value,(e,d)=>(c(),U(P,{key:d,"allow-comments":e.allowComments,name:e.name,"associated-to":e.associatedTo,"blocked-reason":e.blockedReason,"creation-date":e.creationDate,"dept-number":e.deptNumber,"is-blocked":e.isBlocked,"user-uid":e.userUid,"doc-id":e.docId},null,8,["allow-comments","name","associated-to","blocked-reason","creation-date","dept-number","is-blocked","user-uid","doc-id"]))),128))])):y("",!0)}});export{Z as default};
