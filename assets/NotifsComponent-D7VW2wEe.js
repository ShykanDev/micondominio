import{d as h,N as D,l as d,m as I,y as E,f as u,o as f,b as v,a as e,t as p,at as V,h as T,g as l,x as c,v as m,F as x,aj as N,ag as O,au as U,J as B,T as F,K}from"./index-BwM74EYG.js";import{_ as L}from"./SurveyVotation.vue_vue_type_script_setup_true_lang-lSbdZMld.js";const S={class:"max-w-4xl p-6 mx-auto mt-10 bg-white rounded-lg shadow-md font-poppins"},$={class:"mb-4"},j={class:"mb-4 text-sky-800"},M={class:"flex flex-wrap my-3 space-x-2 font-poppins"},z=["onClick"],A={class:"mb-4 font-poppins"},J={id:"opciones-container"},R={class:"flex items-center mb-2"},q=["onKeypress"],G={class:"flex justify-end"},X=h({__name:"NotifsComponent",setup(H){const y=new D({duration:4e3,position:{x:"left",y:"top"},dismissible:!0}),o=d(""),i=d(""),r=d(""),a=d({title:o.value,description:i.value,options:[],surveyDocId:""}),b=()=>{a.value.options.push({option:r.value,numberVotes:0}),r.value=""},k=t=>{a.value.options.splice(t,1)},w=I(),C=E(w,`condominios/${u().getCondominiumId}/surveys`),_=async()=>{u().setIsLoadingComponent(!0);try{const t=await B(C,{title:o.value,description:i.value,options:a.value.options,createdBy:u().getUserUid,creationDate:F.now(),voters:[]});await K(t,{surveyDocId:t.id}),o.value="",i.value="",r.value="",a.value.options=[],y.success("Encuesta enviada exitosamente"),u().setIsLoadingComponent(!1)}catch(t){console.log("Error enviando la survey a firebase:",t),y.error("Error enviando la survey, intentalo más tarde"),u().setIsLoadingComponent(!1)}};return(t,s)=>(f(),v(x,null,[e("section",null,[p(T(L,{class:"fixed z-40 bottom-3 left-2","survey-description":i.value,"survey-title":o.value,"survey-options":a.value.options},null,8,["survey-description","survey-title","survey-options"]),[[V,o.value]])]),e("section",S,[s[9]||(s[9]=e("h2",{class:"mb-4 text-2xl font-bold text-sky-800"},[e("i",{class:"fas fa-poll text-sky-900"}),l(" Crear Encuesta")],-1)),e("form",{onSubmit:s[3]||(s[3]=c(()=>{},["prevent"]))},[e("div",$,[s[4]||(s[4]=e("label",{for:"titulo",class:"block mb-2 font-bold text-sky-700"},[e("i",{class:"fas fa-heading"}),l(" Título de la Encuesta")],-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>o.value=n),type:"text",id:"titulo",name:"titulo",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese el título de la encuesta"},null,512),[[m,o.value]])]),e("div",j,[s[5]||(s[5]=e("label",{for:"descripcion",class:"block mb-2 font-bold text-sky-700"},[e("i",{class:"fas fa-align-left"}),l(" Descripción")],-1)),p(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=n=>i.value=n),id:"descripcion",name:"descripcion",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese la descripción de la encuesta"},null,512),[[m,i.value]])]),e("div",M,[(f(!0),v(x,null,N(a.value.options,(n,g)=>(f(),v("article",{key:g,class:"bg-white px-2 my-1 rounded-md text-sky-800 border-[2px] border-sky-600 flex items-center gap-2 animate-fade-up animate-duration-150"},[l(O(n.option)+" ",1),e("i",{onClick:P=>k(g),class:"text-red-400 cursor-pointer fas fa-times"},null,8,z)]))),128))]),e("div",A,[s[7]||(s[7]=e("label",{for:"opciones",class:"block mb-2 font-bold text-sky-700"},[e("i",{class:"fas fa-list"}),l(" Opciones")],-1)),e("div",J,[e("div",R,[p(e("input",{onKeypress:U(c(b,["prevent"]),["enter"]),"onUpdate:modelValue":s[2]||(s[2]=n=>r.value=n),type:"text",name:"opciones[]",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese una opción"},null,40,q),[[m,r.value]])])]),e("button",{onClick:c(b,["prevent"]),type:"button",id:"agregar-opcion",class:"px-4 py-2 mt-2 text-white bg-green-500 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"},s[6]||(s[6]=[e("i",{class:"fas fa-plus"},null,-1),l(" Agregar Opción")]))]),e("div",G,[e("button",{onClick:c(_,["prevent"]),type:"submit",class:"px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},s[8]||(s[8]=[e("i",{class:"fas fa-paper-plane"},null,-1),l(" Enviar Encuesta")]))])],32)])],64))}});export{X as default};
