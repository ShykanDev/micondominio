import{d as g,ai as w,o as r,b as c,a as e,ag as l,u as C,f as n,g as x,i as y,m as h,D as b,aw as I,l as p,y as N,z as k,A as D,H as S,h as L,F as q,aj as $,c as B,B as j}from"./index-BwM74EYG.js";import{L as V}from"./LoadingBar-HjF7RDsw.js";const A={class:"w-full max-w-md p-6 rounded-lg shadow-lg hover:border-[1px] hover:border-sky-700 bg-slate-50"},E={class:"flex items-center mb-4"},F={class:"text-lg font-semibold"},T={class:"text-sm text-gray-500"},R={class:"text-sm text-gray-500"},U={class:"mb-4 text-gray-700"},z={class:"flex items-center justify-between min-w-60"},H={class:"flex items-center w-full text-gray-500"},M={class:"text-xs"},P={key:0,class:"flex justify-end w-full"},G=g({__name:"CommentCard",props:{userName:{type:String,required:!0},userType:{type:String,required:!0},comment:{type:String,required:!0},userImage:{type:String,required:!1},date:{type:String,default:()=>new Date().toLocaleDateString()},commentId:{type:String,required:!0}},setup(o){const s=o,d=w(()=>s.userName.includes("propietario")?s.userName.replace(/propietario/gi,"").trim():s.userName.replace(/administrador/gi,"").trim()),u=async()=>{n().setIsLoadingComponent(!0);try{const a=h(),t=b(a,`condominios/${n().getCondominiumId}/comments/${s.commentId}`);console.log("Comentario a eliminar:",t),await I(t),console.log("Comentario eliminado con éxito"),n().setIsLoadingComponent(!1)}catch(a){console.error("Error al eliminar el comentario:",a),n().setIsLoadingComponent(!1)}};return(a,t)=>(r(),c("div",A,[e("div",E,[t[0]||(t[0]=e("i",{class:"mr-3 text-3xl text-gray-500 fas fa-user-circle"},null,-1)),e("div",null,[e("h2",F,l(d.value),1),e("p",T,[e("small",null,"Categoría: "+l(o.userType),1)]),e("p",R,[e("small",null,"Usuario: "+l(o.userName.includes("propietario")?"Propietario":"Administrador"),1)])])]),e("p",U,l(o.comment),1),e("div",z,[e("div",H,[t[1]||(t[1]=e("i",{class:"mr-1 fas fa-calendar-alt"},null,-1)),e("span",M,l(o.date),1)]),C(n)().getIsAdmin?(r(),c("div",P,[e("button",{onClick:u,class:"flex items-center text-red-500 hover:text-red-700"},t[2]||(t[2]=[e("i",{class:"mr-1 fas fa-trash"},null,-1),x(" Eliminar ")]))])):y("",!0)])]))}}),J={class:"w-full p-6 mx-auto mt-10 overflow-auto bg-white rounded-lg shadow-md min-h-dvh font-poppins"},K={key:0,class:"fixed top-0 bottom-0 left-0 right-0 flex items-center justify-center bg-white bg-opacity-0"},O={class:"flex flex-wrap gap-4 justify-evenly"},X=g({__name:"CommentsComponent",setup(o){const s=p(!1),d=h(),u=N(d,`condominios/${n().getAdminDocId}/comments`),a=k(u,D("announcement","!=","")),t=p([]),_=async()=>{s.value=!0;try{(await j(a)).forEach(m=>{t.value.push(m.data())}),s.value=!1}catch(f){s.value=!1,console.log(f)}};return S(()=>{_()}),(f,m)=>(r(),c("section",J,[s.value?(r(),c("section",K,[L(V)])):y("",!0),m[0]||(m[0]=e("h2",{class:"text-2xl font-bold text-center text-sky-800"},[x("Comentarios de sus propietarios"),e("i",{class:"ml-2 fas fa-comment"}),e("i",{class:"ml-2 fas fa-users"})],-1)),e("article",O,[(r(!0),c(q,null,$(t.value,(i,v)=>(r(),B(G,{key:v,comment:i.announcement,"user-name":i.author,"user-type":i.category,date:new Date().toDateString(i.date),"comment-id":i.documentId},null,8,["comment","user-name","user-type","date","comment-id"]))),128))])]))}});export{X as default};
