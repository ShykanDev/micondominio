import{d as g,a1 as w,o as r,e as c,a as e,a0 as l,u as C,h as n,g as x,j as y,m as p,a2 as b,i as I,F as k,a3 as S,c as q}from"./index-TFeQVYrp.js";import{g as h,d as D,f as L,c as N,q as $,w as j,a as B}from"./index.esm2017-DkIOf4jH.js";import{L as V}from"./LoadingBar-F4jFd-sY.js";const E={class:"w-full max-w-md p-6 rounded-lg shadow-lg hover:border-[1px] hover:border-sky-700 bg-slate-50"},F={class:"flex items-center mb-4"},T={class:"text-lg font-semibold"},A={class:"text-sm text-gray-500"},R={class:"text-sm text-gray-500"},U={class:"mb-4 text-gray-700"},M={class:"flex items-center justify-between min-w-60"},P={class:"flex items-center w-full text-gray-500"},z={class:"text-xs"},G={key:0,class:"flex justify-end w-full"},H=g({__name:"CommentCard",props:{userName:{type:String,required:!0},userType:{type:String,required:!0},comment:{type:String,required:!0},userImage:{type:String,required:!1},date:{type:String,default:()=>new Date().toLocaleDateString()},commentId:{type:String,required:!0}},setup(o){const s=o,d=w(()=>s.userName.replace(/administrador/gi,"").trim()),u=async()=>{n().setIsLoadingComponent(!0);try{const a=h(),t=D(a,`condominios/${n().getCondominiumId}/comments/${s.commentId}`);console.log("Comentario a eliminar:",t),await L(t),console.log("Comentario eliminado con éxito"),n().setIsLoadingComponent(!1)}catch(a){console.error("Error al eliminar el comentario:",a),n().setIsLoadingComponent(!1)}};return(a,t)=>(r(),c("div",E,[e("div",F,[t[0]||(t[0]=e("i",{class:"mr-3 text-3xl text-gray-500 fas fa-user-circle"},null,-1)),e("div",null,[e("h2",T,l(d.value),1),e("p",A,[e("small",null,"Categoría: "+l(o.userType),1)]),e("p",R,[e("small",null,"Usuario: "+l(o.userType.includes("propietario")?"Propietario":"Administrador"),1)])])]),e("p",U,l(o.comment),1),e("div",M,[e("div",P,[t[1]||(t[1]=e("i",{class:"mr-1 fas fa-calendar-alt"},null,-1)),e("span",z,l(o.date),1)]),C(n)().getIsAdmin?(r(),c("div",G,[e("button",{onClick:u,class:"flex items-center text-red-500 hover:text-red-700"},t[2]||(t[2]=[e("i",{class:"mr-1 fas fa-trash"},null,-1),x(" Eliminar ")]))])):y("",!0)])]))}}),J={class:"w-full p-6 mx-auto mt-10 overflow-auto bg-white rounded-lg shadow-md min-h-dvh font-poppins"},K={key:0,class:"fixed top-0 bottom-0 left-0 right-0 flex items-center justify-center bg-white bg-opacity-0"},O={class:"flex flex-wrap gap-4 justify-evenly"},Y=g({__name:"CommentsComponent",setup(o){const s=p(!1),d=h(),u=N(d,`condominios/${n().getAdminDocId}/comments`),a=$(u,j("announcement","!=","")),t=p([]),_=async()=>{s.value=!0;try{(await B(a)).forEach(m=>{t.value.push(m.data())}),s.value=!1}catch(f){s.value=!1,console.log(f)}};return b(()=>{_()}),(f,m)=>(r(),c("section",J,[s.value?(r(),c("section",K,[I(V)])):y("",!0),m[0]||(m[0]=e("h2",{class:"text-2xl font-bold text-center text-sky-800"},[x("Comentarios de sus propietarios"),e("i",{class:"ml-2 fas fa-comment"}),e("i",{class:"ml-2 fas fa-users"})],-1)),e("article",O,[(r(!0),c(k,null,S(t.value,(i,v)=>(r(),q(H,{key:v,comment:i.announcement,"user-name":i.author,"user-type":i.category,date:new Date().toDateString(i.date),"comment-id":i.documentId},null,8,["comment","user-name","user-type","date","comment-id"]))),128))])]))}});export{Y as default};
