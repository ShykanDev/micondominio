import{d as F,r as g,o as A,f as O,a as r,l as q,g as V,e as x,v as L,m as U,n as D,j as X,F as $,c as z,w as B,_ as Y,k as G}from"./index-CJ9D0THZ.js";import{g as W,c as J,u as j,a as R}from"./index-2cab5241-C6aIfsb0.js";import{g as K,c as P,a as Q,b as H}from"./index.esm2017-C_JOvPpH.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var f=function(){return f=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},f.apply(this,arguments)},Z=function(){function a(e){this.options=e,this.listeners={}}return a.prototype.on=function(e,t){var n=this.listeners[e]||[];this.listeners[e]=n.concat([t])},a.prototype.triggerEvent=function(e,t){var n=this,o=this.listeners[e]||[];o.forEach(function(s){return s({target:n,event:t})})},a}(),w;(function(a){a[a.Add=0]="Add",a[a.Remove=1]="Remove"})(w||(w={}));var ee=function(){function a(){this.notifications=[]}return a.prototype.push=function(e){this.notifications.push(e),this.updateFn(e,w.Add,this.notifications)},a.prototype.splice=function(e,t){var n=this.notifications.splice(e,t)[0];return this.updateFn(n,w.Remove,this.notifications),n},a.prototype.indexOf=function(e){return this.notifications.indexOf(e)},a.prototype.onUpdate=function(e){this.updateFn=e},a}(),h;(function(a){a.Dismiss="dismiss",a.Click="click"})(h||(h={}));var S={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},te=function(){function a(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var e=document.createDocumentFragment(),t=this._createHTMLElement({tagName:"div",className:"notyf"});e.appendChild(t),document.body.appendChild(e),this.container=t,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return a.prototype.on=function(e,t){var n;this.events=f(f({},this.events),(n={},n[e]=t,n))},a.prototype.update=function(e,t){t===w.Add?this.addNotification(e):t===w.Remove&&this.removeNotification(e)},a.prototype.removeNotification=function(e){var t=this,n=this._popRenderedNotification(e),o;if(n){o=n.node,o.classList.add("notyf__toast--disappear");var s;o.addEventListener(this.animationEndEventName,s=function(u){u.target===o&&(o.removeEventListener(t.animationEndEventName,s),t.container.removeChild(o))})}},a.prototype.addNotification=function(e){var t=this._renderNotification(e);this.notifications.push({notification:e,node:t}),this._announce(e.options.message||"Notification")},a.prototype._renderNotification=function(e){var t,n=this._buildNotificationCard(e),o=e.options.className;return o&&(t=n.classList).add.apply(t,o.split(" ")),this.container.appendChild(n),n},a.prototype._popRenderedNotification=function(e){for(var t=-1,n=0;n<this.notifications.length&&t<0;n++)this.notifications[n].notification===e&&(t=n);if(t!==-1)return this.notifications.splice(t,1)[0]},a.prototype.getXPosition=function(e){var t;return((t=e==null?void 0:e.position)===null||t===void 0?void 0:t.x)||"right"},a.prototype.getYPosition=function(e){var t;return((t=e==null?void 0:e.position)===null||t===void 0?void 0:t.y)||"bottom"},a.prototype.adjustContainerAlignment=function(e){var t=this.X_POSITION_FLEX_MAP[this.getXPosition(e)],n=this.Y_POSITION_FLEX_MAP[this.getYPosition(e)],o=this.container.style;o.setProperty("justify-content",n),o.setProperty("align-items",t)},a.prototype._buildNotificationCard=function(e){var t=this,n=e.options,o=n.icon;this.adjustContainerAlignment(n);var s=this._createHTMLElement({tagName:"div",className:"notyf__toast"}),u=this._createHTMLElement({tagName:"div",className:"notyf__ripple"}),c=this._createHTMLElement({tagName:"div",className:"notyf__wrapper"}),p=this._createHTMLElement({tagName:"div",className:"notyf__message"});p.innerHTML=n.message||"";var m=n.background||n.backgroundColor;if(o){var C=this._createHTMLElement({tagName:"div",className:"notyf__icon"});if((typeof o=="string"||o instanceof String)&&(C.innerHTML=new String(o).valueOf()),typeof o=="object"){var b=o.tagName,T=b===void 0?"i":b,M=o.className,v=o.text,i=o.color,l=i===void 0?m:i,k=this._createHTMLElement({tagName:T,className:M,text:v});l&&(k.style.color=l),C.appendChild(k)}c.appendChild(C)}if(c.appendChild(p),s.appendChild(c),m&&(n.ripple?(u.style.background=m,s.appendChild(u)):s.style.background=m),n.dismissible){var d=this._createHTMLElement({tagName:"div",className:"notyf__dismiss"}),y=this._createHTMLElement({tagName:"button",className:"notyf__dismiss-btn"});d.appendChild(y),c.appendChild(d),s.classList.add("notyf__toast--dismissible"),y.addEventListener("click",function(N){var E,_;(_=(E=t.events)[h.Dismiss])===null||_===void 0||_.call(E,{target:e,event:N}),N.stopPropagation()})}s.addEventListener("click",function(N){var E,_;return(_=(E=t.events)[h.Click])===null||_===void 0?void 0:_.call(E,{target:e,event:N})});var I=this.getYPosition(n)==="top"?"upper":"lower";return s.classList.add("notyf__toast--"+I),s},a.prototype._createHTMLElement=function(e){var t=e.tagName,n=e.className,o=e.text,s=document.createElement(t);return n&&(s.className=n),s.textContent=o||null,s},a.prototype._createA11yContainer=function(){var e=this._createHTMLElement({tagName:"div",className:"notyf-announcer"});e.setAttribute("aria-atomic","true"),e.setAttribute("aria-live","polite"),e.style.border="0",e.style.clip="rect(0 0 0 0)",e.style.height="1px",e.style.margin="-1px",e.style.overflow="hidden",e.style.padding="0",e.style.position="absolute",e.style.width="1px",e.style.outline="0",document.body.appendChild(e),this.a11yContainer=e},a.prototype._announce=function(e){var t=this;this.a11yContainer.textContent="",setTimeout(function(){t.a11yContainer.textContent=e},100)},a.prototype._getAnimationEndEventName=function(){var e=document.createElement("_fake"),t={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"},n;for(n in t)if(e.style[n]!==void 0)return t[n];return"animationend"},a}(),ne=function(){function a(e){var t=this;this.dismiss=this._removeNotification,this.notifications=new ee,this.view=new te;var n=this.registerTypes(e);this.options=f(f({},S),e),this.options.types=n,this.notifications.onUpdate(function(o,s){return t.view.update(o,s)}),this.view.on(h.Dismiss,function(o){var s=o.target,u=o.event;t._removeNotification(s),s.triggerEvent(h.Dismiss,u)}),this.view.on(h.Click,function(o){var s=o.target,u=o.event;return s.triggerEvent(h.Click,u)})}return a.prototype.error=function(e){var t=this.normalizeOptions("error",e);return this.open(t)},a.prototype.success=function(e){var t=this.normalizeOptions("success",e);return this.open(t)},a.prototype.open=function(e){var t=this.options.types.find(function(s){var u=s.type;return u===e.type})||{},n=f(f({},t),e);this.assignProps(["ripple","position","dismissible"],n);var o=new Z(n);return this._pushNotification(o),o},a.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},a.prototype.assignProps=function(e,t){var n=this;e.forEach(function(o){t[o]=t[o]==null?n.options[o]:t[o]})},a.prototype._pushNotification=function(e){var t=this;this.notifications.push(e);var n=e.options.duration!==void 0?e.options.duration:this.options.duration;n&&setTimeout(function(){return t._removeNotification(e)},n)},a.prototype._removeNotification=function(e){var t=this.notifications.indexOf(e);t!==-1&&this.notifications.splice(t,1)},a.prototype.normalizeOptions=function(e,t){var n={type:e};return typeof t=="string"?n.message=t:typeof t=="object"&&(n=f(f({},n),t)),n},a.prototype.registerTypes=function(e){var t=(e&&e.types||[]).slice(),n=S.types.map(function(o){var s=-1;t.forEach(function(c,p){c.type===o.type&&(s=p)});var u=s!==-1?t.splice(s,1)[0]:{};return f(f({},o),u)});return n.concat(t)},a}();const ie={class:"font-roboto font-poppins"},oe={key:0,class:"fixed top-0 bottom-0 left-0 right-0 z-40 flex flex-col items-center justify-center transition-opacity duration-500 ease-in-out bg-white bg-opacity-100 animate-fade"},ae={class:"flex items-center justify-center px-3 py-2 bg-white bg-opacity-50"},se={class:"w-full max-w-4xl p-8 bg-white rounded-lg shadow-lg"},re={class:"mb-4"},le={class:"relative"},ue={class:"mb-4"},ce={class:"relative"},de={key:0,class:"mb-4 animate-fade-up"},fe={class:"relative"},pe={class:"mb-4"},me={class:"relative"},ve={class:"mb-4"},ye={class:"relative"},ge={class:"mb-4"},he={class:"relative"},be={class:"mb-6"},_e=F({__name:"RegisterCard",setup(a){const e=g(!1),t=new ne({position:{x:"center",y:"top"},dismissible:!0,duration:5e3}),n=g(""),o=g(""),s=g(""),u=g(""),c=g(""),p=g(""),m=g(""),C=W(),b=K(),T=()=>{const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let i="";for(let l=0;l<8;l++){const k=Math.floor(Math.random()*v.length);i+=v.charAt(k)}return i},M=async()=>{try{if(!n.value||!o.value||!c.value||!p.value||!s.value){t.error("Por favor, completa todos los campos.");return}if(c.value!==p.value){t.error("Las contraseñas no coinciden.");return}e.value=!0,m.value=T();const v=P(b,"condominios");if((await Q(v)).docs.map(y=>y.data()).some(y=>y.invitationId===m.value)){t.error("Error al generar el ID de invitación. Intentandolo de nuevo."),m.value=T(),e.value=!1;return}const d=(await J(C,o.value,c.value)).user;if(d&&s.value.toLowerCase()=="administrador"){await j(d,{displayName:`${s.value} ${n.value}`}),await R(d);const y=await H(P(b,"condominios"),{nombre:u.value,creadoPor:d.uid,tipo:s.value,invitationId:m.value}),I=P(b,`condominios/${y.id}/comentarios`),N=P(b,`condominios/${y.id}/anuncios`);await H(N,{titulo:"Bienvenidos",contenido:"Este es el primer anuncio de tu condominio.",autor:d.displayName,fecha:new Date}),await H(I,{anuncio:"Primer comentario generado automáticamente",categoría:"Inquilinos",fecha:new Date,autor:d.displayName}),t.success({message:"Registro exitoso. Por favor, verifique su correo electrónico, le hemos enviado un correo de verificación.",duration:7e3}),n.value="",o.value="",c.value="",p.value="",s.value="",e.value=!1}else d&&s.value.toLowerCase()=="propietario"&&(e.value=!0,await j(d,{displayName:`${s.value} ${n.value}`}),await R(d),t.success({message:"Registro exitoso. Por favor, verifique su correo electrónico, le hemos enviado un correo de verificación.",duration:7e3}),n.value="",o.value="",c.value="",p.value="",s.value="",e.value=!1)}catch(v){const i=v;e.value=!1,t.error(i.message)}};return(v,i)=>(A(),O($,null,[i[22]||(i[22]=r("img",{src:"https://images.unsplash.com/photo-1576961453646-b4c376c7021b?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",class:"fixed top-0 bottom-0 left-0 right-0 object-cover w-full h-full animate-fade -z-10",alt:"A scenic view of a modern building with a clear sky in the background"},null,-1)),r("section",ie,[e.value?(A(),O("section",oe,i[6]||(i[6]=[q('<p class="text-2xl font-semibold text-sky-800 font-poppins">Creando Cuenta <span class="animate-pulse animate-delay-0">.</span> <span class="animate-pulse animate-delay-300">.</span> <span class="animate-pulse animate-delay-400">.</span></p><div class="flex flex-col items-center justify-center w-full gap-4"><div class="flex items-center justify-center text-4xl text-blue-400 border-8 border-gray-300 rounded-full w-28 h-28 animate-spin border-t-blue-400"></div></div>',2)]))):V("",!0),r("div",ae,[r("div",se,[i[21]||(i[21]=r("h2",{class:"mb-6 text-4xl font-bold text-center text-sky-900"},"Crear una Cuenta",-1)),r("form",null,[r("div",re,[i[8]||(i[8]=r("label",{for:"nombre",class:"block font-medium text-sky-900"},"Nombre",-1)),r("div",le,[x(r("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>n.value=l),type:"text",id:"nombre",name:"nombre",placeholder:"Ingresa tu nombre",class:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[L,n.value]]),i[7]||(i[7]=r("i",{class:"absolute text-sky-800 fas fa-user left-3 top-3"},null,-1))])]),r("div",ue,[i[11]||(i[11]=r("label",{for:"tipo-cuenta",class:"block font-medium text-sky-900"},"Tipo de Cuenta",-1)),r("div",ce,[x(r("select",{"onUpdate:modelValue":i[1]||(i[1]=l=>s.value=l),id:"tipo-cuenta",name:"tipo-cuenta",class:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},i[9]||(i[9]=[r("option",{value:"",disabled:"",selected:""},"Selecciona el tipo de cuenta",-1),r("option",{value:"propietario"},"Propietario/Inquilino",-1),r("option",{value:"administrador"},"Administrador",-1)]),512),[[U,s.value]]),i[10]||(i[10]=r("i",{class:"absolute text-sky-800 fas fa-user-tag left-3 top-3"},null,-1))]),i[12]||(i[12]=r("div",{class:"mt-2 text-sm text-gray-600"},[r("i",{class:"mr-1 fas fa-info-circle"}),D(" La cuenta por defecto es de "),r("strong",null,"Propietario/Inquilino"),D(". Seleccione "),r("strong",null,"Administrador"),D(" si usted es responsable de la administración de un edificio o condominio. ")],-1))]),s.value.toLowerCase()=="administrador"?(A(),O("div",de,[i[14]||(i[14]=r("label",{for:"condominium",class:"block font-medium text-sky-900"},"Nombre del Condominio",-1)),r("div",fe,[x(r("input",{"onUpdate:modelValue":i[2]||(i[2]=l=>u.value=l),type:"email",id:"condominium",name:"condominium",placeholder:"Ingresa el nombre del condominio ",class:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[L,u.value]]),i[13]||(i[13]=r("i",{class:"absolute text-sky-800 fas fa-building left-3 top-3"},null,-1))])])):V("",!0),r("div",pe,[i[16]||(i[16]=r("label",{for:"correo",class:"block font-medium text-sky-900"},"Correo Electrónico",-1)),r("div",me,[x(r("input",{"onUpdate:modelValue":i[3]||(i[3]=l=>o.value=l),type:"email",id:"correo",name:"correo",placeholder:"Ingresa tu correo electrónico",class:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[L,o.value]]),i[15]||(i[15]=r("i",{class:"absolute text-sky-800 fas fa-envelope left-3 top-3"},null,-1))])]),r("div",ve,[i[18]||(i[18]=r("label",{for:"contrasena",class:"block font-medium text-sky-900"},"Contraseña",-1)),r("div",ye,[x(r("input",{"onUpdate:modelValue":i[4]||(i[4]=l=>c.value=l),type:"password",id:"contrasena",name:"contrasena",placeholder:"Ingresa tu contraseña",class:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[L,c.value]]),i[17]||(i[17]=r("i",{class:"absolute text-sky-800 fas fa-lock left-3 top-3"},null,-1))])]),r("div",ge,[i[20]||(i[20]=r("label",{for:"confirmar-contrasena",class:"block font-medium text-sky-900"},"Confirmar Contraseña",-1)),r("div",he,[x(r("input",{"onUpdate:modelValue":i[5]||(i[5]=l=>p.value=l),type:"password",id:"confirmar-contrasena",name:"confirmar-contrasena",placeholder:"Confirma tu contraseña",class:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[L,p.value]]),i[19]||(i[19]=r("i",{class:"absolute text-sky-800 fas fa-lock left-3 top-3"},null,-1))])]),r("div",be,[r("button",{onClick:X(M,["prevent"]),type:"submit",class:"w-full px-3 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500"},"Crear Cuenta")])])])])])],64))}}),Ce=F({__name:"RegisterView",setup(a){return(e,t)=>(A(),z(Y,null,{main:B(()=>[G(_e)]),_:1}))}});export{Ce as default};
