import{d as C,N as I,l as c,m as k,y as h,f as l,o as D,b as E,t as m,at as F,h as T,a as o,g as a,x as V,v as g,av as A,F as N,T as U,J as _,K as L,_ as S}from"./index-BwM74EYG.js";import{_ as B}from"./AnnouncementCard.vue_vue_type_script_setup_true_lang-CUBxhIE2.js";const M={class:"max-w-4xl p-6 mx-auto mt-10 bg-white rounded-lg shadow-md font-poppins"},P={class:"mb-4"},j={class:"mb-4"},$={class:"mb-4"},H={class:"grid w-full max-w-xs items-center gap-1.5"},J={class:"flex items-center mt-3 mb-4"},K=C({__name:"AnnouncementComponent",setup(O){const r=new I({duration:4e3,dismissible:!0,position:{x:"left",y:"top"},ripple:!0}),n=c(""),i=c(""),u=c(!1),d=c(""),f=c(null),b=s=>{const e=s.target;e.files&&e.files[0]&&(f.value=e.files[0])},x=async s=>{l().setIsLoadingComponent(!0);const e=new FormData;e.append("image",s),e.append("key","c1c5eb1a375c6b1069d7f5c0622751be");try{const p=await(await fetch("https://api.imgbb.com/1/upload",{method:"POST",body:e})).json();if(p.success)return console.log("Image uploaded successfully:",p.data.url),p.data.url;console.error("Error uploading image:",p.error.message),r.error("Error al subir la imagen")}catch(t){console.error("Error during upload:",t),r.error("Error al subir la imagen")}finally{l().setIsLoadingComponent(!1)}},v=k(),y=h(v,`condominios/${l().getCondominiumId}/announcements`),w=async()=>{l().setIsLoadingComponent(!0);let s="";if(f.value&&(s=await x(f.value),!s)){l().setIsLoadingComponent(!1),r.error("Error al subir la imagen.");return}const e={title:n.value,description:i.value,category:d.value,urgent:u.value,imageUrl:s,creationDate:U.now()};try{const t=await _(y,e);await L(t,{announcementId:t.id}),n.value="",i.value="",d.value="",f.value=null,u.value=!1,r.success("Posteado exitosamente")}catch{r.error("Error al postear el anuncio")}finally{l().setIsLoadingComponent(!1)}};return(s,e)=>(D(),E(N,null,[m(T(B,{class:"fixed shadow-2xl bottom-3 left-3",title:n.value,description:i.value,date:new Date().toDateString(),category:d.value,"is-urgent":u.value},null,8,["title","description","date","category","is-urgent"]),[[F,n.value]]),o("section",M,[e[10]||(e[10]=o("h2",{class:"mb-4 text-2xl font-bold text-sky-800"},[o("i",{class:"fas fa-bullhorn"}),a(" Nuevo Anuncio")],-1)),o("form",{onSubmit:V(w,["prevent"])},[o("div",P,[e[4]||(e[4]=o("label",{for:"titulo",class:"block mb-2 font-bold text-sky-800"},[o("i",{class:"fas fa-heading"}),a(" Título del Anuncio")],-1)),m(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),type:"text",id:"titulo",name:"titulo",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese el título del anuncio"},null,512),[[g,n.value]])]),o("div",j,[e[5]||(e[5]=o("label",{for:"category",class:"block mb-2 font-bold text-sky-800"},[o("i",{class:"fas fa-tag"}),a(" Categoría del Anuncio")],-1)),m(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>d.value=t),type:"text",id:"category",name:"category",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese la categoría del anuncio e.g. Pago de mantenimiento, etc."},null,512),[[g,d.value]])]),o("div",$,[e[6]||(e[6]=o("label",{for:"descripcion",class:"block mb-2 font-bold text-sky-800"},[o("i",{class:"fas fa-align-left"}),a(" Descripción")],-1)),m(o("textarea",{"onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t),id:"descripcion",name:"descripcion",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese la descripción del anuncio"},null,512),[[g,i.value]])]),o("div",H,[e[7]||(e[7]=o("label",{class:"text-sm font-medium leading-none text-gray-400 peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},[o("i",{class:"mr-2 fas fa-image text-sky-600"}),a(" Imagen")],-1)),o("input",{class:"flex w-full text-sm text-gray-400 bg-white border border-blue-300 rounded-md border-input file:border-0 file:bg-blue-600 file:text-white file:text-sm file:font-medium",type:"file",id:"picture",onChange:b},null,32)]),o("div",J,[m(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t),type:"checkbox",id:"urgente",name:"urgente",class:"mr-2"},null,512),[[A,u.value]]),e[8]||(e[8]=o("label",{for:"urgente",class:"font-bold cursor-pointer text-sky-800"},[o("i",{class:"fas fa-exclamation-circle"}),a(" ¿Es Urgente?")],-1))]),e[9]||(e[9]=o("div",{class:"flex justify-end"},[o("button",{type:"submit",class:"px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},[o("i",{class:"fas fa-plus"}),a(" Crear Anuncio ")])],-1))],32)])],64))}}),z=S(K,[["__scopeId","data-v-ba063932"]]);export{z as default};
