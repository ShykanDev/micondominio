import{d as h,r as u,s as y,o as p,f,a as e,e as d,a3 as C,k as D,n as l,j as c,v,F as g,h as T,t as V,a4 as E}from"./index-CvqitIG0.js";import{_ as I}from"./SurveyVotation.vue_vue_type_script_setup_true_lang-Ctfn1Kbn.js";import{g as O,c as U,b as B,T as F,u as N}from"./index.esm2017-pqe3CByq.js";const S={class:"max-w-4xl p-6 mx-auto mt-10 bg-white rounded-lg shadow-md font-poppins"},K={class:"mb-4"},$={class:"mb-4 text-sky-800"},j={class:"flex flex-wrap my-3 space-x-2 font-poppins"},M=["onClick"],A={class:"mb-4 font-poppins"},L={id:"opciones-container"},R={class:"flex items-center mb-2"},q=["onKeypress"],z={class:"flex justify-end"},W=h({__name:"NotifsComponent",setup(G){const o=u(""),i=u(""),r=u(""),a=u({title:o.value,description:i.value,options:[],surveyDocId:""}),m=()=>{a.value.options.push(r.value),r.value=""},x=t=>{a.value.options.splice(t,1)},k=O(),w=U(k,`condominios/${y().getCondominiumId}/surveys`),_=async()=>{try{const t=await B(w,{title:o.value,description:i.value,options:a.value.options,createdBy:y().getUserUid,creationDate:F.now()});await N(t,{surveyDocId:t.id}),o.value="",i.value="",r.value="",a.value.options=[]}catch(t){console.log("Error enviando la survey a firebase:",t)}};return(t,s)=>(p(),f(g,null,[e("section",null,[d(D(I,{class:"fixed bottom-3 left-2","survey-description":i.value,"survey-title":o.value,"survey-options":a.value.options},null,8,["survey-description","survey-title","survey-options"]),[[C,o.value]])]),e("section",S,[s[9]||(s[9]=e("h2",{class:"mb-4 text-2xl font-bold text-sky-800"},[e("i",{class:"fas fa-poll text-sky-900"}),l(" Crear Encuesta")],-1)),e("form",{onSubmit:s[3]||(s[3]=c(()=>{},["prevent"]))},[e("div",K,[s[4]||(s[4]=e("label",{for:"titulo",class:"block mb-2 font-bold text-sky-700"},[e("i",{class:"fas fa-heading"}),l(" Título de la Encuesta")],-1)),d(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>o.value=n),type:"text",id:"titulo",name:"titulo",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese el título de la encuesta"},null,512),[[v,o.value]])]),e("div",$,[s[5]||(s[5]=e("label",{for:"descripcion",class:"block mb-2 font-bold text-sky-700"},[e("i",{class:"fas fa-align-left"}),l(" Descripción")],-1)),d(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=n=>i.value=n),id:"descripcion",name:"descripcion",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese la descripción de la encuesta"},null,512),[[v,i.value]])]),e("div",j,[(p(!0),f(g,null,T(a.value.options,(n,b)=>(p(),f("article",{key:b,class:"bg-sky-900 px-2 my-1 rounded-md text-white border-[1px] border-sky-600"},[l(V(n)+" ",1),e("i",{onClick:H=>x(b),class:"text-red-400 cursor-pointer fas fa-times"},null,8,M)]))),128))]),e("div",A,[s[7]||(s[7]=e("label",{for:"opciones",class:"block mb-2 font-bold text-sky-700"},[e("i",{class:"fas fa-list"}),l(" Opciones")],-1)),e("div",L,[e("div",R,[d(e("input",{onKeypress:E(c(m,["prevent"]),["enter"]),"onUpdate:modelValue":s[2]||(s[2]=n=>r.value=n),type:"text",name:"opciones[]",class:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingrese una opción"},null,40,q),[[v,r.value]])])]),e("button",{onClick:c(m,["prevent"]),type:"button",id:"agregar-opcion",class:"px-4 py-2 mt-2 text-white bg-green-500 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"},s[6]||(s[6]=[e("i",{class:"fas fa-plus"},null,-1),l(" Agregar Opción")]))]),e("div",z,[e("button",{onClick:c(_,["prevent"]),type:"submit",class:"px-4 py-2 text-white bg-blue-500 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},s[8]||(s[8]=[e("i",{class:"fas fa-paper-plane"},null,-1),l(" Enviar Encuesta")]))])],32)])],64))}});export{W as default};
